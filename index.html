<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è‡ªç”±è¡Œå°å¹«æ‰‹ - é›²ç«¯ç‰ˆ</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Firebase SDK (Modular) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, onSnapshot, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // --- è«‹åœ¨æ­¤è™•æ›¿æ›ç‚ºä½ çš„ Firebase è¨­å®š ---
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        // ---------------------------------------

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        const { createApp, ref, computed, onMounted, watch, nextTick } = Vue;

        createApp({
            setup() {
                const userId = ref(null);
                const isLoading = ref(true);
                const isSaving = ref(false); // ç”¨æ–¼é˜²æ­¢åŒæ­¥å¾ªç’°
                const localLastUpdated = ref(0); // ç´€éŒ„æœ¬åœ°æœ€å¾Œä¿®æ”¹æ™‚é–“

                const mainTitle = ref('æˆ‘çš„æ—¥æœ¬æ—…è¡Œ');
                const isEditingMainTitle = ref(false);
                const mainTitleInput = ref(null);
                const startDate = ref(new Date().toISOString().split('T')[0]);
                const currentView = ref('list');
                const days = ref([{ date: '', events: [] }]);
                const checklist = ref([
                    { text: 'è­·ç…§', done: false },
                    { text: 'æ©Ÿç¥¨ç¢ºèªå–®', done: false },
                    { text: 'æ—¥æœ¬ç¶²å¡/WiFi', done: false },
                    { text: 'å¤–å¹£ç¾é‡‘/ä¿¡ç”¨å¡', done: false }
                ]);

                const currentDayIndex = ref(0);
                const showModal = ref(false);
                const isEditing = ref(false);
                const expandedEventId = ref(null);
                const form = ref({ id: null, time: '09:00', location: '', type: 'sight', note: '', cost: '', currency: 'JPY', mapUrl: '' });

                // æ ¸å¿ƒï¼šé›²ç«¯å„²å­˜é‚è¼¯ (å¢åŠ é˜²æŠ–èˆ‡ç‰ˆæœ¬æ¨™è¨˜)
                const saveToCloud = async () => {
                    if (!userId.value || isLoading.value) return;
                    
                    isSaving.value = true;
                    const timestamp = new Date().getTime();
                    localLastUpdated.value = timestamp;

                    try {
                        const data = {
                            days: JSON.parse(JSON.stringify(days.value)),
                            startDate: startDate.value,
                            mainTitle: mainTitle.value,
                            checklist: checklist.value,
                            updatedAt: timestamp // ç´€éŒ„é€™å€‹ç‰ˆæœ¬çš„æ™‚é–“æˆ³è¨˜
                        };
                        await setDoc(doc(db, "user_trips", userId.value), data);
                    } catch (e) {
                        console.error("å„²å­˜å¤±æ•—: ", e);
                    } finally {
                        // å»¶é²è§£é™¤é–å®šï¼Œé¿å… Firebase å›å‚³çš„å¿«ç…§ç¬é–“è§¸ç™¼æ›´æ–°
                        setTimeout(() => { isSaving.value = false; }, 1000);
                    }
                };

                onMounted(() => {
                    signInAnonymously(auth).catch(err => console.error("ç™»å…¥å¤±æ•—", err));

                    onAuthStateChanged(auth, (user) => {
                        if (user) {
                            userId.value = user.uid;
                            onSnapshot(doc(db, "user_trips", user.uid), (docSnap) => {
                                // é‡è¦ï¼šå¦‚æœç›®å‰æ­£åœ¨å„²å­˜ä¸­ï¼Œæˆ–é›²ç«¯è³‡æ–™ç‰ˆæœ¬è¼ƒèˆŠï¼Œå‰‡ä¸æ›´æ–°æœ¬åœ°è³‡æ–™
                                if (isSaving.value) return;

                                if (docSnap.exists()) {
                                    const data = docSnap.data();
                                    const cloudUpdatedAt = data.updatedAt || 0;

                                    if (cloudUpdatedAt > localLastUpdated.value) {
                                        days.value = data.days || days.value;
                                        startDate.value = data.startDate || startDate.value;
                                        mainTitle.value = data.mainTitle || mainTitle.value;
                                        checklist.value = data.checklist || checklist.value;
                                        localLastUpdated.value = cloudUpdatedAt;
                                    }
                                }
                                setTimeout(() => { isLoading.value = false; }, 800);
                            }, (err) => {
                                console.error("ç›£è½å¤±æ•—", err);
                                isLoading.value = false;
                            });
                        }
                    });
                });

                // åªæœ‰ç•¶è³‡æ–™çœŸçš„æ”¹è®Šæ™‚æ‰è§¸ç™¼å„²å­˜
                watch([days, mainTitle, startDate, checklist], () => {
                    if (!isLoading.value && !isSaving.value) {
                        saveToCloud();
                    }
                }, { deep: true });

                const recalculateAllDates = () => {
                    const start = new Date(startDate.value);
                    days.value.forEach((day, index) => {
                        const current = new Date(start);
                        current.setDate(start.getDate() + index);
                        day.date = current.toISOString().split('T')[0];
                    });
                };

                const handleStartDateChange = () => {
                    recalculateAllDates();
                };

                const formatDisplayDate = (d) => d ? `${new Date(d).getMonth() + 1}/${new Date(d).getDate()}` : '';
                
                const currentDayEvents = computed(() => {
                    const currentDay = days.value[currentDayIndex.value];
                    if (!currentDay || !currentDay.events) return [];
                    return [...currentDay.events].sort((a,b) => a.time.localeCompare(b.time));
                });

                const addDay = () => {
                    days.value.push({ date: '', events: [] });
                    recalculateAllDates();
                    currentDayIndex.value = days.value.length - 1;
                };

                const getDayTotal = (day, curr) => (day.events || []).reduce((sum, e) => e.currency === curr ? sum + (Number(e.cost) || 0) : sum, 0);
                const totalJPY = computed(() => days.value.reduce((sum, d) => sum + getDayTotal(d, 'JPY'), 0));
                const totalTWD = computed(() => days.value.reduce((sum, d) => sum + getDayTotal(d, 'TWD'), 0));

                const toggleCheck = (idx) => checklist.value[idx].done = !checklist.value[idx].done;
                const addCheckItem = () => {
                    const text = prompt("è¼¸å…¥æº–å‚™äº‹é …ï¼š");
                    if (text) checklist.value.push({ text, done: false });
                };
                const removeCheckItem = (idx) => checklist.value.splice(idx, 1);

                const openAddModal = () => { isEditing.value = false; form.value = { id: Date.now(), time: '09:00', location: '', type: 'sight', note: '', cost: '', currency: 'JPY', mapUrl: '' }; showModal.value = true; };
                const openEditModal = (ev) => { isEditing.value = true; form.value = { ...ev }; showModal.value = true; };
                const closeModal = () => showModal.value = false;
                
                const saveEvent = () => {
                    if (!form.value.location) return;
                    const targetDay = days.value[currentDayIndex.value];
                    if (!targetDay.events) targetDay.events = [];
                    if (isEditing.value) {
                        const idx = targetDay.events.findIndex(e => e.id === form.value.id);
                        if (idx !== -1) targetDay.events[idx] = { ...form.value };
                    } else { targetDay.events.push({ ...form.value }); }
                    closeModal();
                };
                
                const deleteEvent = (id) => { if(confirm('ç¢ºå®šåˆªé™¤æ­¤è¡Œç¨‹ï¼Ÿ')) days.value[currentDayIndex.value].events = days.value[currentDayIndex.value].events.filter(e => e.id !== id); };
                const toggleDetail = (id) => expandedEventId.value = expandedEventId.value === id ? null : id;
                const openGoogleMaps = (e) => window.open(e.mapUrl || `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e.location)}`, '_blank');
                const editMainTitle = () => { isEditingMainTitle.value = true; nextTick(() => mainTitleInput.value?.focus()); };
                const saveMainTitle = () => isEditingMainTitle.value = false;

                const getTypeIcon = (t) => {
                    const icons = { sight: 'fa-camera', food: 'fa-utensils', shopping: 'fa-bag-shopping', transport: 'fa-train' };
                    return icons[t] || 'fa-location-dot';
                };

                const getTypeColor = (t) => {
                    const colors = { sight: 'bg-pink-500', food: 'bg-orange-500', shopping: 'bg-purple-500', transport: 'bg-blue-500' };
                    return colors[t] || 'bg-gray-400';
                };

                return {
                    userId, isLoading, mainTitle, isEditingMainTitle, mainTitleInput, editMainTitle, saveMainTitle,
                    startDate, handleStartDateChange, days, currentDayIndex, currentDayEvents,
                    showModal, isEditing, form, expandedEventId, currentView,
                    checklist, toggleCheck, addCheckItem, removeCheckItem,
                    totalJPY, totalTWD, getDayTotal,
                    formatDisplayDate, addDay, openAddModal, openEditModal, closeModal, saveEvent, deleteEvent, toggleDetail, openGoogleMaps, getTypeIcon, getTypeColor
                };
            }
        }).mount('#app');
    </script>

    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f3f4f6; -webkit-tap-highlight-color: transparent; overscroll-behavior-y: none; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .app-container { max-width: 480px; margin: 0 auto; background-color: #ffffff; height: 100dvh; position: relative; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
        .timeline-line { position: absolute; left: 24px; top: 20px; bottom: -20px; width: 2px; background-color: #f1f5f9; z-index: 0; }
        
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        /* è¼‰å…¥é®ç½©å„ªåŒ–ç‰ˆ */
        .loading-overlay { 
            position: absolute; 
            inset: 0; 
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); 
            z-index: 100; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            color: white;
        }

        .plane-box {
            position: relative;
            font-size: 3rem;
            animation: flight 2s infinite ease-in-out;
        }

        .cloud-bg {
            position: absolute;
            font-size: 1.5rem;
            opacity: 0.4;
            animation: drift 3s infinite linear;
        }

        @keyframes flight {
            0%, 100% { transform: translateY(0) rotate(5deg); }
            50% { transform: translateY(-15px) rotate(-5deg); }
        }

        @keyframes drift {
            0% { transform: translateX(100px); opacity: 0; }
            100% { transform: translateX(-100px); opacity: 0; }
        }

        .loading-text {
            margin-top: 2rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.95); }
        }

        .category-dot { transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); cursor: pointer; }
        .check-item-done { text-decoration: line-through; opacity: 0.5; }
        .slide-up-enter-active, .slide-up-leave-active { transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
        .slide-up-enter-from, .slide-up-leave-to { transform: translateY(100%); }

        .start-date-config { 
            position: relative; overflow: hidden; min-width: 80px; display: flex; 
            flex-direction: column; align-items: center; justify-content: center; 
            background-color: #eff6ff; border: 1px solid #dbeafe; border-radius: 16px; 
            padding: 8px; color: #2563eb; cursor: pointer; 
        }
        .date-input-hidden { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }
    </style>
</head>
<body>

<div id="app">
    <div class="app-container">
        
        <!-- è³ªæ„Ÿé›²ç«¯åŒæ­¥è¼‰å…¥ä¸­ç‹€æ…‹ -->
        <transition name="fade">
            <div v-if="isLoading" class="loading-overlay">
                <div class="cloud-bg" style="top: 35%; right: 20%; animation-delay: 0s;"><i class="fa-solid fa-cloud"></i></div>
                <div class="cloud-bg" style="top: 45%; left: 15%; animation-delay: 1.5s;"><i class="fa-solid fa-cloud"></i></div>
                <div class="plane-box"><i class="fa-solid fa-plane"></i></div>
                <div class="loading-text"><span class="text-sm">æ­£åœ¨åŒæ­¥é›²ç«¯è¡Œç¨‹...</span></div>
                <div class="absolute bottom-10 text-[10px] opacity-40 uppercase tracking-widest">Osaka Travel Assistant Pro</div>
            </div>
        </transition>
        
        <!-- Header -->
        <header class="bg-white px-4 py-4 border-b border-gray-100 flex items-center justify-between shrink-0 z-20">
            <div class="flex-1">
                <div v-if="isEditingMainTitle" class="flex items-center gap-2">
                    <input ref="mainTitleInput" v-model="mainTitle" @blur="saveMainTitle" @keyup.enter="saveMainTitle" class="w-full bg-blue-50 border-b-2 border-blue-500 outline-none text-xl font-bold p-1 rounded">
                </div>
                <h1 v-else @click="editMainTitle" class="text-xl font-bold text-gray-800 tracking-wide flex items-center cursor-pointer">
                    {{ mainTitle }} <i class="fa-solid fa-pen text-[10px] ml-2 text-gray-300"></i>
                </h1>
            </div>
            <div class="flex items-center gap-2">
                <div class="text-[9px] text-green-500 font-bold bg-green-50 px-2 py-1 rounded-full flex items-center gap-1 shadow-sm">
                    <i class="fa-solid fa-cloud"></i> é›²ç«¯åŒæ­¥ä¸­
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="flex-1 relative overflow-hidden flex flex-col">
            
            <!-- è¡Œç¨‹åˆ—è¡¨ -->
            <div v-show="currentView === 'list'" class="flex-1 flex flex-col h-full fade-in">
                <div class="bg-white shrink-0 px-2 py-4 z-10 overflow-x-auto no-scrollbar whitespace-nowrap border-b border-gray-100">
                    <div class="flex space-x-3 px-2 items-stretch">
                        <div class="start-date-config shadow-sm">
                            <i class="fa-solid fa-calendar-day text-xs mb-1"></i>
                            <span class="text-[10px] font-bold">è¨­å®šé¦–æ—¥</span>
                            <input type="date" v-model="startDate" @change="handleStartDateChange" class="date-input-hidden">
                        </div>
                        <div v-for="(day, index) in days" :key="index" @click="currentDayIndex = index"
                            class="px-3 py-2 rounded-2xl flex-shrink-0 flex flex-col items-center min-w-[90px] cursor-pointer transition-all"
                            :class="currentDayIndex === index ? 'bg-blue-600 text-white shadow-lg scale-105' : 'bg-gray-50 text-gray-400'">
                            <span class="text-[9px] font-bold opacity-80 mb-0.5">DAY {{ index + 1 }}</span>
                            <span class="text-[11px] font-bold">{{ formatDisplayDate(day.date) }}</span>
                        </div>
                        <button @click="addDay" class="px-5 py-2 rounded-2xl bg-gray-50 text-blue-500 border border-dashed border-blue-200 min-w-[75px]">
                            <i class="fa-solid fa-plus text-xs"></i>
                        </button>
                    </div>
                </div>

                <main class="flex-1 overflow-y-auto no-scrollbar relative p-4 bg-gray-50 pb-24">
                    <div v-if="currentDayEvents.length === 0" class="flex flex-col items-center justify-center h-64 text-gray-400">
                        <i class="fa-solid fa-map-location-dot text-3xl mb-4 opacity-20"></i>
                        <p class="text-sm font-medium">ä»Šå¤©é‚„æ²’å®‰æ’è¡Œç¨‹</p>
                    </div>
                    <div v-else class="space-y-4 relative mt-2">
                        <div class="timeline-line"></div>
                        <div v-for="(event) in currentDayEvents" :key="event.id" class="relative pl-14">
                            <div class="absolute left-0 top-0 flex flex-col items-center w-12 z-10">
                                <span class="text-[10px] font-bold text-gray-400 mb-1">{{ event.time }}</span>
                                <div @click.stop="toggleDetail(event.id)" 
                                     class="w-9 h-9 rounded-full flex items-center justify-center text-white text-sm shadow-md border-4 border-white category-dot" 
                                     :class="getTypeColor(event.type)">
                                    <i :class="['fa-solid', getTypeIcon(event.type)]"></i>
                                </div>
                            </div>
                            <div @click="toggleDetail(event.id)" class="bg-white rounded-2xl p-4 shadow-sm border border-gray-100 cursor-pointer active:scale-[0.98] transition-transform">
                                <h3 class="font-bold text-gray-800 text-lg leading-tight">{{ event.location }}</h3>
                                <div class="flex items-center justify-between mt-1.5">
                                    <p class="text-gray-600 text-xs line-clamp-2">{{ event.note || 'å°šç„¡å‚™è¨»' }}</p>
                                    <span v-if="event.cost" class="text-[10px] font-bold bg-yellow-50 text-yellow-700 px-2 py-0.5 rounded-full ml-auto">
                                        {{ event.currency === 'TWD' ? 'NT$' : 'Â¥' }}{{ event.cost }}
                                    </span>
                                </div>
                                <div v-if="expandedEventId === event.id" class="mt-4 pt-3 border-t border-gray-100 fade-in">
                                    <div class="grid grid-cols-2 gap-2 mb-2">
                                        <button @click.stop="openGoogleMaps(event)" class="bg-blue-50 text-blue-600 py-2 rounded-xl text-sm font-bold">é–‹å•Ÿåœ°åœ–</button>
                                        <button @click.stop="openEditModal(event)" class="bg-gray-50 text-gray-600 py-2 rounded-xl text-sm font-bold">ç·¨è¼¯è¡Œç¨‹</button>
                                    </div>
                                    <button @click.stop="deleteEvent(event.id)" class="w-full text-red-400 text-[10px] py-1">åˆªé™¤æ­¤é …ç›®</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
                <button @click="openAddModal" class="absolute bottom-6 right-6 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg flex items-center justify-center text-2xl z-20 mb-[60px] active:scale-90 transition-transform">
                    <i class="fa-solid fa-plus"></i>
                </button>
            </div>

            <!-- å…¶ä»–è¦–åœ–å…§å®¹ä¿æŒä¸è®Š -->
            <div v-show="currentView === 'budget'" class="flex-1 overflow-y-auto p-6 bg-gray-50 fade-in">
                <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center"><i class="fa-solid fa-wallet mr-2 text-blue-500"></i> é ç®—çµ±è¨ˆ</h2>
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div class="bg-white p-4 rounded-3xl shadow-sm border border-gray-100">
                        <p class="text-[10px] font-bold text-gray-400 uppercase">ç¸½æ—¥åœ“èŠ±è²»</p>
                        <p class="text-2xl font-bold text-orange-500 mt-1">Â¥ {{ totalJPY.toLocaleString() }}</p>
                    </div>
                    <div class="bg-white p-4 rounded-3xl shadow-sm border border-gray-100">
                        <p class="text-[10px] font-bold text-gray-400 uppercase">ç¸½å°å¹£èŠ±è²»</p>
                        <p class="text-2xl font-bold text-blue-500 mt-1">NT$ {{ totalTWD.toLocaleString() }}</p>
                    </div>
                </div>
            </div>

            <div v-show="currentView === 'checklist'" class="flex-1 overflow-y-auto p-6 bg-gray-50 fade-in">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800 flex items-center"><i class="fa-solid fa-clipboard-check mr-2 text-green-500"></i> è¡Œå‰æº–å‚™</h2>
                    <button @click="addCheckItem" class="text-blue-600 text-sm font-bold">+ æ–°å¢é …ç›®</button>
                </div>
                <div class="space-y-3">
                    <div v-for="(item, idx) in checklist" :key="idx" @click="toggleCheck(idx)"
                         class="bg-white rounded-2xl p-4 shadow-sm border border-gray-100 flex items-center justify-between cursor-pointer">
                        <div class="flex items-center gap-3">
                            <div class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors" :class="item.done ? 'bg-green-500 border-green-500 text-white' : 'border-gray-200'">
                                <i v-if="item.done" class="fa-solid fa-check text-[10px]"></i>
                            </div>
                            <span class="font-medium text-gray-700" :class="{'check-item-done': item.done}">{{ item.text }}</span>
                        </div>
                        <button @click.stop="removeCheckItem(idx)" class="text-gray-300 hover:text-red-500"><i class="fa-solid fa-xmark"></i></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- åº•éƒ¨å°è¦½ -->
        <nav class="bg-white border-t border-gray-100 flex justify-around items-center h-[70px] shrink-0 z-30 pb-2">
            <button @click="currentView = 'list'" class="flex flex-col items-center justify-center w-full h-full" :class="currentView === 'list' ? 'text-blue-600' : 'text-gray-300'">
                <i class="fa-solid fa-rectangle-list text-xl"></i>
                <span class="text-[10px] mt-1 font-bold">è¡Œç¨‹è¡¨</span>
            </button>
            <button @click="currentView = 'budget'" class="flex flex-col items-center justify-center w-full h-full" :class="currentView === 'budget' ? 'text-blue-600' : 'text-gray-300'">
                <i class="fa-solid fa-wallet text-xl"></i>
                <span class="text-[10px] mt-1 font-bold">é ç®—</span>
            </button>
            <button @click="currentView = 'checklist'" class="flex flex-col items-center justify-center w-full h-full" :class="currentView === 'checklist' ? 'text-blue-600' : 'text-gray-300'">
                <i class="fa-solid fa-list-check text-xl"></i>
                <span class="text-[10px] mt-1 font-bold">æº–å‚™</span>
            </button>
        </nav>

        <!-- å½ˆçª— -->
        <transition name="slide-up">
            <div v-if="showModal" class="fixed inset-0 z-50 flex items-end">
                <div class="absolute inset-0 bg-black/40 backdrop-blur-sm" @click="closeModal"></div>
                <div class="bg-white w-full rounded-t-[32px] p-6 relative z-10 h-[90vh] flex flex-col">
                    <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6 shrink-0"></div>
                    <h3 class="text-xl font-bold text-gray-800 mb-4">{{ isEditing ? 'ç·¨è¼¯è¡Œç¨‹' : 'æ–°å¢è¡Œç¨‹' }}</h3>
                    <form @submit.prevent="saveEvent" class="space-y-4 overflow-y-auto flex-1 pb-6 no-scrollbar">
                        <div class="grid grid-cols-2 gap-4">
                            <input v-model="form.time" type="time" required class="w-full bg-gray-50 border-none rounded-2xl px-4 py-3 text-sm font-bold">
                            <select v-model="form.type" class="w-full bg-gray-50 border-none rounded-2xl px-4 py-3 text-sm">
                                <option value="sight">æ™¯é» (ğŸ“¸)</option>
                                <option value="food">ç¾é£Ÿ (ğŸœ)</option>
                                <option value="shopping">è³¼ç‰© (ğŸ›ï¸)</option>
                                <option value="transport">äº¤é€š (ğŸšƒ)</option>
                            </select>
                        </div>
                        <input v-model="form.location" placeholder="è¼¸å…¥åœ°é»åç¨±" required class="w-full bg-gray-50 border-none rounded-2xl px-4 py-3 text-sm font-bold">
                        <div class="grid grid-cols-2 gap-4">
                            <input v-model.number="form.cost" type="number" placeholder="é ä¼°é‡‘é¡" class="w-full bg-gray-50 border-none rounded-2xl px-4 py-3 text-sm">
                            <select v-model="form.currency" class="w-full bg-gray-50 border-none rounded-2xl px-4 py-3 text-sm">
                                <option value="JPY">æ—¥åœ“ (Â¥)</option>
                                <option value="TWD">å°å¹£ ($)</option>
                            </select>
                        </div>
                        <textarea v-model="form.note" rows="2" placeholder="å‚™è¨»..." class="w-full bg-gray-50 border-none rounded-2xl px-4 py-3 text-sm"></textarea>
                    </form>
                    <div class="pt-4 flex space-x-3 mt-auto">
                        <button type="button" @click="closeModal" class="flex-1 py-4 bg-gray-100 text-gray-600 rounded-2xl font-bold">å–æ¶ˆ</button>
                        <button @click="saveEvent" class="flex-2 py-4 bg-blue-600 text-white rounded-2xl font-bold w-[60%] active:bg-blue-700">å„²å­˜è¡Œç¨‹</button>
                    </div>
                </div>
            </div>
        </transition>

    </div>
</div>

</body>
</html>
